"use strict";(self["webpackChunkvue2_shopping"]=self["webpackChunkvue2_shopping"]||[]).push([[541],{541:function(s,t,a){a.r(t),a.d(t,{default:function(){return u}});a(4114);var e=function(){var s=this,t=s._self._c;return t("div",{staticClass:"pay"},[t("van-nav-bar",{attrs:{fixed:"",title:"订单结算台","left-arrow":""},on:{"click-left":function(t){return s.$router.go(-1)}}}),t("div",{staticClass:"address",on:{click:function(t){return s.$router.push("/address")}}},[t("div",{staticClass:"left-icon"},[t("van-icon",{attrs:{name:"logistics"}})],1),s.defaultl?.address_id?t("div",{staticClass:"info"},[t("div",{staticClass:"info-content"},[t("span",{staticClass:"name"},[s._v(s._s(s.defaultl.name+" "))]),t("span",{staticClass:"mobile"},[s._v(s._s(s.defaultl.phone))])]),t("div",{staticClass:"info-address"},[s._v(" "+s._s(s.longAddress)+" ")])]):t("div",{staticClass:"info"},[s._v(" 请选择配送地址 ")]),t("div",{staticClass:"right-icon"},[t("van-icon",{attrs:{name:"arrow"}})],1)]),t("div",{staticClass:"pay-list"},[t("div",{staticClass:"list"},s._l(s.order.goodsList,(function(a){return t("div",{key:a.goods_id,staticClass:"goods-item"},[t("div",{staticClass:"left"},[t("img",{attrs:{src:a.goods_image,alt:""}})]),t("div",{staticClass:"right"},[t("p",{staticClass:"tit text-ellipsis-2"},[s._v(" "+s._s(a.goods_name)+" ")]),t("p",{staticClass:"info"},[t("span",{staticClass:"count"},[s._v("x"+s._s(a.total_num))]),t("span",{staticClass:"price"},[s._v("¥"+s._s(a.total_pay_price))])])])])})),0),t("div",{staticClass:"flow-num-box"},[t("span",[s._v("共 "+s._s(s.order.orderTotalNum)+" 件商品，合计：")]),t("span",{staticClass:"money"},[s._v("￥"+s._s(s.order.orderTotalPrice))])]),t("div",{staticClass:"pay-detail"},[t("div",{staticClass:"pay-cell"},[t("span",[s._v("订单总金额：")]),t("span",{staticClass:"red"},[s._v("￥"+s._s(s.order.orderTotalPrice))])]),s._m(0),t("div",{staticClass:"pay-cell"},[t("span",[s._v("配送费用：")]),t("span",{staticClass:"red"},[s._v("+￥0.00")])])]),t("div",{staticClass:"pay-way"},[t("span",{staticClass:"tit"},[s._v("支付方式")]),t("div",{staticClass:"pay-cell"},[t("span",[t("van-icon",{attrs:{name:"balance-o"}}),s._v("余额支付（可用 ¥ "+s._s(s.personal.balance)+" 元）")],1),t("span",{staticClass:"red"},[t("van-icon",{attrs:{name:"passed"}})],1)])]),t("div",{staticClass:"buytips"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:s.remark,expression:"remark"}],attrs:{placeholder:"选填：买家留言（50字内）",name:"",id:"",cols:"30",rows:"10"},domProps:{value:s.remark},on:{input:function(t){t.target.composing||(s.remark=t.target.value)}}})])]),t("div",{staticClass:"footer-fixed"},[t("div",{staticClass:"left"},[s._v("实付款："),t("span",[s._v("￥"+s._s(s.order.orderTotalPrice))])]),t("div",{staticClass:"tipsbtn",on:{click:s.submitOrder}},[s._v("提交订单")])])],1)},r=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"pay-cell"},[t("span",[s._v("优惠券：")]),t("span",[s._v("无优惠券可用")])])}],i=(a(8992),a(2577),a(2776)),d=a(4180),o={name:"PayIndex",data(){return{addressList:[],order:{},personal:{},defaultl:{},remark:""}},created(){this.getAddRessList(),this.getOrderList(),this.getDefault()},computed:{longAddress(){const s=this.defaultl.region;return s.province+s.city+s.region+this.defaultl.detail},mode(){return this.$route.query.mode},cartIds(){return this.$route.query.cartIds},goodsId(){return this.$route.query.goodsId},goodsSkuId(){return this.$route.query.goodsSkuId},goodsNum(){return this.$route.query.goodsNum}},methods:{async getAddRessList(){const{data:{list:s}}=await(0,i.FM)();this.addressList=s},async getDefault(){const{data:{defaultId:s}}=await(0,i.Ud)();console.log(this.addressList),this.defaultl=this.addressList.find((t=>t.address_id===s)),console.log(this.defaultl)},async getOrderList(){if("cart"===this.mode){const{data:{order:s,personal:t}}=await(0,d.Fs)(this.mode,{cartIds:this.cartIds});this.order=s,this.personal=t}else if("buyNow"===this.mode){const{data:{order:s,personal:t}}=await(0,d.Fs)(this.mode,{goodsId:this.goodsId,goodsSkuId:this.goodsSkuId,goodsNum:this.goodsNum});this.order=s,this.personal=t}},async submitOrder(){"cart"===this.mode?await(0,d.J$)(this.mode,{cartIds:this.cartIds,remark:this.remark}):"buyNow"===this.mode&&await(0,d.J$)(this.mode,{goodsId:this.goodsId,goodsSkuId:this.goodsSkuId,goodsNum:this.goodsNum,remark:this.remark}),this.$toast.success("支付成功"),this.$router.replace("/order")}}},n=o,c=a(1656),l=(0,c.A)(n,e,r,!1,null,"39a05ee9",null),u=l.exports},2776:function(s,t,a){a.d(t,{Bf:function(){return l},E1:function(){return n},FM:function(){return r},Ud:function(){return i},ab:function(){return c},kf:function(){return o},mW:function(){return d}});var e=a(5720);const r=()=>e.A.get("/address/list"),i=()=>e.A.get("/address/defaultId"),d=s=>e.A.post("/address/setDefault",{address_id:s}),o=(s,t)=>e.A.post("/address/edit",{address_id:s,form:{...t}}),n=s=>e.A.post("/address/add",{form:s}),c=s=>e.A.post("/address/delete",{addressId:s}),l=()=>e.A.get("/region/tree")},4180:function(s,t,a){a.d(t,{Fs:function(){return i},J$:function(){return r},JW:function(){return n},Tg:function(){return c},ZT:function(){return o},n7:function(){return d}});var e=a(5720);const r=(s,t)=>e.A.post("/checkout/submit",{mode:s,delivery:10,couponId:0,isUsePoints:0,payType:10,...t}),i=(s,t)=>e.A.get("/checkout/order",{params:{mode:s,delivery:10,couponId:0,isUsePoints:0,...t}}),d=(s,t)=>e.A.get("/order/list",{params:{dataType:s,page:t}}),o=s=>e.A.post("/order/cancel",{orderId:s}),n=s=>e.A.post("/order/receipt",{orderId:s}),c=s=>e.A.post("/order/pay",{orderId:s,payType:10})}}]);
//# sourceMappingURL=541.ac64379d.js.map